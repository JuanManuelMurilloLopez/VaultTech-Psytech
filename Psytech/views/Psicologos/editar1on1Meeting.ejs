<% /*
  Variables expected:
    - idGrupo
    - idAspirante
    - idInstitucion
    - meeting (object with titulo, fecha, horaInicio, horaFin, link, idPsicologo)
    - aspirante (object with nombreUsuario, apellidoPaterno, apellidoMaterno)
    - psicologos (array of {idUsuario, nombreUsuario, apellidoPaterno, apellidoMaterno})
*/ %>
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Editar Entrevista Individual</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h3>Editar Entrevista Individual</h3>
    <p><strong>Aspirante:</strong> <%= aspirante.nombreUsuario %> <%= aspirante.apellidoPaterno %> <%= aspirante.apellidoMaterno %></p>
    <form action="/psicologo/editar-1on1-meeting/<%= meeting.idReunion %>/<%= idGrupo %>/<%= idAspirante %>/<%= idInstitucion %>" method="POST">
        <div class="mb-3">
            <label for="titulo" class="form-label">Título</label>
            <input type="text" class="form-control" id="titulo" name="titulo" value="<%= meeting.titulo %>" required>
        </div>
        <div class="mb-3">
            <label for="fecha" class="form-label">Fecha</label>
            <input type="date" class="form-control" id="fecha" name="fecha" value="<%= meeting.fecha.toISOString ? meeting.fecha.toISOString().slice(0,10) : meeting.fecha %>" required>
        </div>
        <div class="mb-3">
            <label for="horaInicio" class="form-label">Hora de inicio</label>
            <input type="time" class="form-control" id="horaInicio" name="horaInicio" value="<%= meeting.horaInicio %>" required>
        </div>
        <div class="mb-3">
            <label for="horaFin" class="form-label">Hora de fin</label>
            <input type="time" class="form-control" id="horaFin" name="horaFin" value="<%= meeting.horaFin %>" required>
        </div>
        <div class="mb-3">
            <label for="link" class="form-label">Enlace de la reunión</label>
            <input type="url" class="form-control" id="link" name="link" value="<%= meeting.link %>" required>
        </div>
        <div class="mb-3">
            <label for="idPsicologo" class="form-label">Psicóloga asignada</label>
            <select class="form-select" id="idPsicologo" name="idPsicologo" required>
                <% psicologos.forEach(function(psic) { %>
                    <option value="<%= psic.idUsuario %>" <%= meeting.idPsicologo == psic.idUsuario ? 'selected' : '' %>>
                        <%= psic.nombreUsuario %> <%= psic.apellidoPaterno %> <%= psic.apellidoMaterno %>
                    </option>
                <% }) %>
            </select>
        </div>
        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
        <a href="/psicologo/aspirantes/<%= idAspirante %>/<%= idGrupo %>/<%= idInstitucion %>" class="btn btn-secondary ms-2">Cancelar</a>
    </form>
</div>
</body>
</html> 