<% /*
  Variables expected:
    - idGrupo
    - idAspirante
    - aspirante (object with nombreUsuario, apellidoPaterno, apellidoMaterno)
    - psicologos (array of {idUsuario, nombrePsicologo, apellidoPaterno, apellidoMaterno})
    - defaultPsicologo (id of current user)
*/ %>
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Agendar Entrevista Individual</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h3>Agendar Entrevista Individual</h3>
    <p><strong>Aspirante:</strong> <%= aspirante.nombreUsuario %> <%= aspirante.apellidoPaterno %> <%= aspirante.apellidoMaterno %></p>
    <form action="/psicologo/crear-1on1-meeting/<%= idGrupo %>/<%= idAspirante %>/<%= idInstitucion %>" method="POST">
        <div class="mb-3">
            <label for="titulo" class="form-label">Título</label>
            <input type="text" class="form-control" id="titulo" name="titulo" required>
        </div>
        <div class="mb-3">
            <label for="fecha" class="form-label">Fecha</label>
            <input type="date" class="form-control" id="fecha" name="fecha" required>
        </div>
        <div class="mb-3">
            <label for="horaInicio" class="form-label">Hora de inicio</label>
            <input type="time" class="form-control" id="horaInicio" name="horaInicio" required>
        </div>
        <div class="mb-3">
            <label for="horaFin" class="form-label">Hora de fin</label>
            <input type="time" class="form-control" id="horaFin" name="horaFin" required>
        </div>
        <div class="mb-3">
            <label for="link" class="form-label">Enlace de la reunión</label>
            <input type="url" class="form-control" id="link" name="link" required>
        </div>
        <div class="mb-3">
            <label for="idPsicologo" class="form-label">Psicóloga asignada</label>
            <select class="form-select" id="idPsicologo" name="idPsicologo" required>
                <% psicologos.forEach(function(psic) { %>
                    <option value="<%= psic.idUsuario %>" <%= defaultPsicologo == psic.idUsuario ? 'selected' : '' %>>
                        <%= psic.nombreUsuario %> <%= psic.apellidoPaterno %> <%= psic.apellidoMaterno %>
                    </option>
                <% }) %>
            </select>
        </div>
        <button type="submit" class="btn btn-success">Agendar</button>
        <a href="/psicologo/aspirantes/<%= idAspirante %>/<%= idGrupo %>" class="btn btn-secondary ms-2">Cancelar</a>
    </form>
</div>
</body>
</html> 